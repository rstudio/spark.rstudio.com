<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Feature Transformation -- QuantileDiscretizer (Estimator) — ft_quantile_discretizer • sparklyr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Feature Transformation -- QuantileDiscretizer (Estimator) — ft_quantile_discretizer" />
<meta property="og:description" content="ft_quantile_discretizer takes a column with continuous features and outputs
  a column with binned categorical features. The number of bins can be
  set using the num_buckets parameter. It is possible that the number
  of buckets used will be smaller than this value, for example, if there
  are too few distinct values of the input to create enough distinct
  quantiles." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sparklyr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sparklyr/sparklyr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Feature Transformation -- QuantileDiscretizer (Estimator)</h1>
    <small class="dont-index">Source: <a href='https://github.com/sparklyr/sparklyr/blob/master/R/ml_feature_quantile_discretizer.R'><code>R/ml_feature_quantile_discretizer.R</code></a></small>
    <div class="hidden name"><code>ft_quantile_discretizer.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>ft_quantile_discretizer</code> takes a column with continuous features and outputs
  a column with binned categorical features. The number of bins can be
  set using the <code>num_buckets</code> parameter. It is possible that the number
  of buckets used will be smaller than this value, for example, if there
  are too few distinct values of the input to create enough distinct
  quantiles.</p>
    </div>

    <pre class="usage"><span class='fu'>ft_quantile_discretizer</span><span class='op'>(</span>
  <span class='va'>x</span>,
  input_col <span class='op'>=</span> <span class='cn'>NULL</span>,
  output_col <span class='op'>=</span> <span class='cn'>NULL</span>,
  num_buckets <span class='op'>=</span> <span class='fl'>2</span>,
  input_cols <span class='op'>=</span> <span class='cn'>NULL</span>,
  output_cols <span class='op'>=</span> <span class='cn'>NULL</span>,
  num_buckets_array <span class='op'>=</span> <span class='cn'>NULL</span>,
  handle_invalid <span class='op'>=</span> <span class='st'>"error"</span>,
  relative_error <span class='op'>=</span> <span class='fl'>0.001</span>,
  uid <span class='op'>=</span> <span class='fu'><a href='random_string.html'>random_string</a></span><span class='op'>(</span><span class='st'>"quantile_discretizer_"</span><span class='op'>)</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A <code>spark_connection</code>, <code>ml_pipeline</code>, or a <code>tbl_spark</code>.</p></td>
    </tr>
    <tr>
      <th>input_col</th>
      <td><p>The name of the input column.</p></td>
    </tr>
    <tr>
      <th>output_col</th>
      <td><p>The name of the output column.</p></td>
    </tr>
    <tr>
      <th>num_buckets</th>
      <td><p>Number of buckets (quantiles, or categories) into which data
points are grouped. Must be greater than or equal to 2.</p></td>
    </tr>
    <tr>
      <th>input_cols</th>
      <td><p>Names of input columns.</p></td>
    </tr>
    <tr>
      <th>output_cols</th>
      <td><p>Names of output columns.</p></td>
    </tr>
    <tr>
      <th>num_buckets_array</th>
      <td><p>Array of number of buckets (quantiles, or categories)
into which data points are grouped. Each value must be greater than or equal to 2.</p></td>
    </tr>
    <tr>
      <th>handle_invalid</th>
      <td><p>(Spark 2.1.0+) Param for how to handle invalid entries. Options are
'skip' (filter out rows with invalid values), 'error' (throw an error), or
'keep' (keep invalid values in a special additional bucket). Default: "error"</p></td>
    </tr>
    <tr>
      <th>relative_error</th>
      <td><p>(Spark 2.0.0+) Relative error (see documentation for
org.apache.spark.sql.DataFrameStatFunctions.approxQuantile
<a href='https://spark.apache.org/docs/latest/api/scala/index.html#org.apache.spark.sql.DataFrameStatFunctions'>here</a>
for description). Must be in the range [0, 1]. default: 0.001</p></td>
    </tr>
    <tr>
      <th>uid</th>
      <td><p>A character string used to uniquely identify the feature transformer.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Optional arguments; currently unused.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The object returned depends on the class of <code>x</code>.</p>
<ul>
<li><p><code>spark_connection</code>: When <code>x</code> is a <code>spark_connection</code>, the function returns a <code>ml_transformer</code>,
  a <code>ml_estimator</code>, or one of their subclasses. The object contains a pointer to
  a Spark <code>Transformer</code> or <code>Estimator</code> object and can be used to compose
  <code>Pipeline</code> objects.</p></li>
<li><p><code>ml_pipeline</code>: When <code>x</code> is a <code>ml_pipeline</code>, the function returns a <code>ml_pipeline</code> with
  the transformer or estimator appended to the pipeline.</p></li>
<li><p><code>tbl_spark</code>: When <code>x</code> is a <code>tbl_spark</code>, a transformer is constructed then
  immediately applied to the input <code>tbl_spark</code>, returning a <code>tbl_spark</code></p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>NaN handling: null and NaN values will be ignored from the column
  during <code>QuantileDiscretizer</code> fitting. This will produce a <code>Bucketizer</code>
  model for making predictions. During the transformation, <code>Bucketizer</code>
  will raise an error when it finds NaN values in the dataset, but the
  user can also choose to either keep or remove NaN values within the
  dataset by setting <code>handle_invalid</code> If the user chooses to keep NaN values,
  they will be handled specially and placed into their own bucket,
  for example, if 4 buckets are used, then non-NaN data will be put
  into buckets[0-3], but NaNs will be counted in a special bucket[4].</p>
<p>Algorithm: The bin ranges are chosen using an approximate algorithm (see
  the documentation for org.apache.spark.sql.DataFrameStatFunctions.approxQuantile
  <a href='https://spark.apache.org/docs/latest/api/scala/index.html#org.apache.spark.sql.DataFrameStatFunctions'>here</a> for a detailed description). The precision of the approximation can be
  controlled with the <code>relative_error</code> parameter. The lower and upper bin
  bounds will be -Infinity and +Infinity, covering all real values.</p>
<p>Note that the result may be different every time you run it, since the sample
  strategy behind it is non-deterministic.</p>
<p>In the case where <code>x</code> is a <code>tbl_spark</code>, the estimator fits against <code>x</code>
  to obtain a transformer, which is then immediately used to transform <code>x</code>, returning a <code>tbl_spark</code>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>See <a href='http://spark.apache.org/docs/latest/ml-features.html'>http://spark.apache.org/docs/latest/ml-features.html</a> for
  more information on the set of transformations available for DataFrame
  columns in Spark.</p>
<p><code><a href='ft_bucketizer.html'>ft_bucketizer</a></code></p>
<p>Other feature transformers: 
<code><a href='ft_binarizer.html'>ft_binarizer</a>()</code>,
<code><a href='ft_bucketizer.html'>ft_bucketizer</a>()</code>,
<code><a href='ft_chisq_selector.html'>ft_chisq_selector</a>()</code>,
<code><a href='ft_count_vectorizer.html'>ft_count_vectorizer</a>()</code>,
<code><a href='ft_dct.html'>ft_dct</a>()</code>,
<code><a href='ft_elementwise_product.html'>ft_elementwise_product</a>()</code>,
<code><a href='ft_feature_hasher.html'>ft_feature_hasher</a>()</code>,
<code><a href='ft_hashing_tf.html'>ft_hashing_tf</a>()</code>,
<code><a href='ft_idf.html'>ft_idf</a>()</code>,
<code><a href='ft_imputer.html'>ft_imputer</a>()</code>,
<code><a href='ft_index_to_string.html'>ft_index_to_string</a>()</code>,
<code><a href='ft_interaction.html'>ft_interaction</a>()</code>,
<code><a href='ft_lsh.html'>ft_lsh</a></code>,
<code><a href='ft_max_abs_scaler.html'>ft_max_abs_scaler</a>()</code>,
<code><a href='ft_min_max_scaler.html'>ft_min_max_scaler</a>()</code>,
<code><a href='ft_ngram.html'>ft_ngram</a>()</code>,
<code><a href='ft_normalizer.html'>ft_normalizer</a>()</code>,
<code><a href='ft_one_hot_encoder_estimator.html'>ft_one_hot_encoder_estimator</a>()</code>,
<code><a href='ft_one_hot_encoder.html'>ft_one_hot_encoder</a>()</code>,
<code><a href='ft_pca.html'>ft_pca</a>()</code>,
<code><a href='ft_polynomial_expansion.html'>ft_polynomial_expansion</a>()</code>,
<code><a href='ft_r_formula.html'>ft_r_formula</a>()</code>,
<code><a href='ft_regex_tokenizer.html'>ft_regex_tokenizer</a>()</code>,
<code><a href='ft_robust_scaler.html'>ft_robust_scaler</a>()</code>,
<code><a href='ft_sql_transformer.html'>ft_sql_transformer</a>()</code>,
<code><a href='ft_standard_scaler.html'>ft_standard_scaler</a>()</code>,
<code><a href='ft_stop_words_remover.html'>ft_stop_words_remover</a>()</code>,
<code><a href='ft_string_indexer.html'>ft_string_indexer</a>()</code>,
<code><a href='ft_tokenizer.html'>ft_tokenizer</a>()</code>,
<code><a href='ft_vector_assembler.html'>ft_vector_assembler</a>()</code>,
<code><a href='ft_vector_indexer.html'>ft_vector_indexer</a>()</code>,
<code><a href='ft_vector_slicer.html'>ft_vector_slicer</a>()</code>,
<code><a href='ft_word2vec.html'>ft_word2vec</a>()</code></p></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Javier Luraschi, Kevin Kuo, Kevin Ushey, JJ Allaire, Hossein Falaki, Lu Wang, Andy Zhang, Yitao Li,  The Apache Software Foundation.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


