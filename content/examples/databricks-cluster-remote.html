---
title: "Option 1 - Connecting to Databricks remotely"
output:
  html_document:
    toc: true
    toc_depth: 2
    toc_float:
      collapsed: false
params:
  width: 600
---



<div id="overview" class="section level2">
<h2>Overview</h2>
<p>With this configuration, RStudio Server Pro is installed outside of the Spark
cluster and connects to Spark remotely using Databricks Connect.</p>
<p><img src="/images/deployment/databricks/rstudio-databricks-remote.png" width='800px' align='center'/></p>
<p>This is the recommended configuration because it targets separate environments,
involves simpler configuration, avoids resource contention, and allows RStudio
Server Pro to connect to Databricks as well as other remote storage and compute
resources.</p>
</div>
<div id="advantages-and-limitations" class="section level2">
<h2>Advantages and limitations</h2>
<p>Advantages:</p>
<ul>
<li>RStudio Server Pro will remain functional if Databricks clusters are
terminated</li>
<li>Provides the ability to comminicate with one or more Databricks clusters as a
remote compute resource</li>
<li>Avoids resource contention between RStudio Server Pro and Databricks</li>
</ul>
<p>Limitations:</p>
<ul>
<li>Cannot easily or efficiently load data from outside of the Spark cluster</li>
</ul>
</div>
<div id="configure-rstudio-server-pro-to-connect-to-databricks-remotely" class="section level2">
<h2>Configure RStudio Server Pro to connect to Databricks remotely</h2>
</div>
<div id="create-a-databricks-cluster" class="section level2">
<h2>Create a Databricks cluster</h2>
<p>In the Databricks console, create a new Databricks cluster.</p>
</div>
<div id="use-sparklyr" class="section level2">
<h2>Use sparklyr</h2>
<p>To work with a remote Databricks cluster, you need to have a local installation
of Spark that matches the version of Spark on the Databricks Cluster.</p>
<p>You can install Spark by running the following command in the RStudio IDE:</p>
<pre><code>sparklyr::spark_install()</code></pre>
<p><code>SPARK_HOME</code> must be set to the output of <code>databricks-connect get-spark-home</code>.</p>
<p>Connect using the following:</p>
<pre><code>library(sparklyr)

Sys.setenv(SPARK_HOME=&quot;&lt;path-returned-by-databricks-connect-get-spark-home&gt;&quot;)

sc &lt;- spark_connect(master = &quot;local&quot;, method = &quot;databricks&quot;)</code></pre>
</div>
